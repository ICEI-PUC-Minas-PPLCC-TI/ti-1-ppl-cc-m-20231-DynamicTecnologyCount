<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="davi.css">
    <script src="https://kit.fontawesome.com/e65e29a543.js" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
    <header>
        <nav>
            <div class="cabecalho">

                <div class="esquerda">

                    <div class="logo">
                    
                        <img src="logozinha1-2.png">

                    </div>

                    <div class="nome">

                        <p> Dynamic Tecnology Count </p>

                    </div>

                </div>

                <div class="direita">

                    <div class="user">

                        <a href="#"><i class="fa-solid fa-bell fa-xl"></i></a>
                    
                    </div>

                    <div class="notificacao">

                        <a href="#"><i class="fa-solid fa-user fa-xl"></i></a>
                        
                    </div>
                
                </div>


            </div>

        </nav>

    </header>

    <aside>

        <div class="navegacao">
            
            <div class="bar">
                <a href="#"><i class="fa-solid fa-list fa-2xl"></i></i></a>
            </div>

            <div class="home">
                <a href="#"><i class="fa-solid fa-house fa-2xl"></i></a>
            </div>

            <div class="money">
                <a href="/codigo/arthur/financias.html"><i class="fa-solid fa-dollar-sign fa-2xl"></i></a>
            </div>

            <div class="users1">
                <a href="/codigo/matheus/index.html"><i class="fa-solid fa-users-rectangle fa-2xl"></i></a>
            </div>

            <div class="users2">
                <a href="#"><i class="fa-solid fa-users fa-2xl"></i></a>
            </div>

            <div class="receip">
                <a href="/codigo/arthur/contratacao.html"><i class="fa-solid fa-receipt fa-2xl"></i></a>
            </div>

            <div class="rotate">
                <a href="#"><i class="fa-solid fa-rotate fa-2xl"></i></a>
            </div>

        </div>
        
    </aside>
        <h1>CADASTRO DE ÁREAS</h1>
        <div class="corpo">
        <input type="text" id="NomeArea" class="NomeArea" placeholder="Nome da Área">
       
        <input type="text" id="Cap" class="Cap" placeholder="Capacidade de Pacientes">
   
        
        <button type="submit" id="Salvar" class="enviar" onclick="adicionarInformacao()">Adicionar</button>
    </div>


<h2 class="infos">Informações Salvas</h2>
  <table id="tabelaCRUD">
    <thead>
      <tr>
        <th>Area</th>
        <th>Capacidade</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    
    function getInformacoes() {
  return JSON.parse(localStorage.getItem('dadosArea')) || [];
}

function adicionarInformacao() {
  var nomeArea = document.getElementById('NomeArea').value;
  var capacidade = document.getElementById('Cap').value;

  var informacao = {
    NomeÁrea: nomeArea,
    CapacidadePacientes: capacidade
  };

  var dadosArea = getInformacoes();
  dadosArea.push(informacao);
  localStorage.setItem('dadosArea', JSON.stringify(dadosArea));

  exibirInformacoes();
}

function exibirInformacoes() {
  var dadosArea = getInformacoes();
  var tabela = document.getElementById("tabelaCRUD");

  tabela.getElementsByTagName("tbody")[0].innerHTML = " ";

  for (var i = 0; i < dadosArea.length; i++) {
    var informacao = dadosArea[i];

    var linha = document.createElement('tr');
    var colunaArea = document.createElement('td');
    var colunaCapacidade = document.createElement('td');
    var colunaAcoes = document.createElement('td')
    var botaoExcluir = document.createElement('button');
    var botaoEditar = document.createElement('button');

    colunaArea.textContent = informacao["NomeÁrea"];
    colunaCapacidade.textContent = informacao["CapacidadePacientes"];

    botaoEditar.textContent = "Editar";
    botaoEditar.addEventListener(
      "click",
      (function (index) {
        return function () {
          editarInformacao(index);
        };
      })(i)
    );

    botaoExcluir.textContent = "Excluir";
    botaoExcluir.addEventListener(
      "click",
      (function (index) {
        return function () {
          excluirInformacao(index);
        };
      })(i)
    );

    colunaAcoes.appendChild(botaoEditar);
    colunaAcoes.appendChild(botaoExcluir);

    linha.appendChild(colunaArea);
    linha.appendChild(colunaCapacidade);
    linha.appendChild(colunaAcoes);

    tabela.getElementsByTagName('tbody')[0].appendChild(linha);
  }
}

function editarInformacao(index) {
  var dadosArea = getInformacoes();
  var informacao = dadosArea[index];

  document.getElementById('NomeArea').value = informacao.NomeÁrea;
  document.getElementById('Cap').value = informacao.CapacidadePacientes;

  dadosArea.splice(index, 1);
  localStorage.setItem('dadosArea', JSON.stringify(dadosArea));
}

function excluirInformacao(index) {
  var dadosArea = getInformacoes();

  dadosArea.splice(index, 1);
  localStorage.setItem('dadosArea', JSON.stringify(dadosArea));
}

exibirInformacoes(); // Chamada correta para exibir as informações na tabela


  </script>


        <footer class = "footer"></footer>
</body>
</html>